var slideData = [{
		"url": "./images/person.png",
		"text": "11Golden importers1 Golden importers1 Golden importers1n importers1 Golden importers1 Golden importers1n importers1 Golden importers1 Golden importers1n importers1 Golden importers1 Golden importers1"
	},
	{
		"url": "./images/gd2.jpg",
		"text": "22Golden importers1 Golden importers1 Golden importers2"
	},
	{
		"url": "./images/person.png",
		"text": "33Golden importers1 Golden importers1 Golden importers1"
	},
	{
		"url": "./images/gd2.jpg",
		"text": "44Golden importers1 Golden importers1 Golden importers2"
	},
	{
		"url": "./images/person.png",
		"text": "55Golden importers1 Golden importers1 Golden importers1"
	},
	{
		"url": "./images/gd2.jpg",
		"text": "66Golden importers1 Golden importers1 Golden importers2"
	}
];

// 需求的数据

var s3Data = [{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	}
];

//公告的数据
var s1Data = [{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	}
];

var s2Data = [{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	},
	{
		"url": "https://www.freshfruitportal.com/news/2017/05/11/sun-world-innovations-joins-thrive-accelerate-new-ag-technologies/",
		"title": "Sun World Innovations joins THRIVE to accelerate new ag technologies"
	}
];

$(function() {
	
	// IE 6,7 ,8  提示下载最新 浏览器
	if(  !document.getElementsByClassName ){

		layer.open({
				type: 1,
				id: 'pro',
				title: 'Warnning',
				maxmin: true,
				area: ['940px', '520px'],
				content: $('#contentBrowser').html()
		});
	
	}

	
	
	


	//轮播图
	var arrImg = ['images/banner2.jpg', 'images/banner4.jpg', 'images/banner3.jpg','images/banner5.jpg'];
	(function() {

		if(!arrImg) {
			return;
		}

		var $box = $('#carousel');
		$box.html('');

		var $boxUl = $('<ul></ul>');
		var $boxDiv = $('<div></div>');
		
		for(var i = 0; i < arrImg.length; i++) {

			var ulLi = $('<li><img src="'+arrImg[i]+'" alt="freshport"/></li>');
			if(i == 0){
				var oSpan = $('<span class="active" >&nbsp;&nbsp;&nbsp;&nbsp;</span>');
			}else{
				var oSpan = $('<span>&nbsp;&nbsp;&nbsp;&nbsp;</span>');		
			}
			
			$boxUl.append(ulLi);
			$boxDiv.append(oSpan);
		}
		$box.append($boxUl,$boxDiv);

		var $olLi = $('#carousel div span');
		var $ulLi = $('#carousel ul li');
		var oneWidth = $ulLi.width();
		var iNow = 0;
		var timer = null;
		var imgLen = $olLi.length ;
		var timer2 = null ;
		
		$ulLi.slice(1).each(function(){
			$(this).css('left',oneWidth);
		});
	
		$olLi.mouseover(function(){
			clearTimeout(timer);
			timer = setTimeout($.proxy(function(){
				$(this).attr('class','active').siblings().attr('class','');
				var index = $(this).index();
				
				if( iNow < index ){
					$ulLi.eq( $(this).index() ).css('left',oneWidth);
					$ulLi.eq(iNow).animate({ left : -oneWidth },600);
					
				}
				else if( iNow > index ){
					$ulLi.eq( $(this).index() ).css('left',-oneWidth);
					$ulLi.eq(iNow).animate({ left : oneWidth },600);
				}
				$ulLi.eq( $(this).index() ).animate({ left : 0 },600);
					
				iNow = index;
			},this),400);
		});
		
		function autoPlay( iNow ){
			iNow = ( iNow ) % imgLen;
			var next = iNow +1 ;
		
			next = ( next ) % imgLen;
			
			$olLi.eq(next).attr('class','active').siblings().attr('class','');
			$ulLi.eq( next ).css('left',-oneWidth);
			$ulLi.eq(iNow).animate({ left : oneWidth },600);	
			$ulLi.eq( next ).animate({ left : 0 },600);
		
			
		}
	
		timer2 = setInterval(function(){
		
			autoPlay( iNow );
			iNow ++ ;
	
		},5000);
		
		
		$box.hover(function(){
			
			clearInterval( timer2 );
		},function(){
			clearInterval( timer2 );
			timer2 = setInterval(function(){
		
				autoPlay( iNow );
				iNow ++ ;
		
			},5000);
		});
		
		
		
	})(arrImg);

	//s1 公告栏 动态生成 ,暂时用不上，来不及开发

	var $s1 = $("#s1List")

	for(var i = 0; i < s1Data.length; i++) {

		var $A = $('<a href="' + s1Data[i].url + '" target="_blank" >' + s1Data[i].title + '</a>');
		var $Li = $('<li></li>');

		$Li.append($A);
		$s1.append($Li);
	}

	$("#s1").Scroll({
		line: 4,
		speed: 1000,
		timer: 3000
	});
	//s2 公告栏 动态生成，暂时用不上，来不及开发

	var $s2 = $("#s2List")

	for(var i = 0; i < s2Data.length; i++) {

		var $A2 = $('<a href="javascript:;" >' + s2Data[i].title + '</a>');
		var $Li2 = $('<li></li>');

		$Li2.append($A2);
		$s2.append($Li2);
	}

	$("#s2").Scroll({
		line: 5,
		speed: 1500,
		timer: 5000
	});

	$("#s2List").delegate('li', 'click', function() {

		layer.open({
			type: 2,
			title: 'welcome',
			maxmin: true,
			area: ['800px', '500px'],
			content: 'http://www.ifreshfair.com/Column/content/id/1154.html'
		});

	});

	//s3 需求 动态生成，暂时用不上，来不及开发

	/*var $s3 = $("#s3List");
	$s3.html('');

	var $ul = $('<ul></ul>');
	for(var i = 0; i < s3Data.length; i++) {

		var $A3 = $('<a href="javascript:void(0);"  class="itme_01" >' + s3Data[i].title + '</a>');
		var $Span3 = $('<span class="date">' + s3Data[i].time + '</span>');

		var $Li3 = $('<li></li>');

		$Li3.append($A3, $Span3);
		$ul.append($Li3);
	}

	$s3.html($ul.html());

	$ul.html('');

	$("#s3").Scroll({
		line: 4,
		speed: 1000,
		timer: 3000,
		up: "btn1",
		down: "btn2"
	});*/
	// 第一个时间 过渡时间 ； 第二个时间 是循环时间
	slide('slider4' , slideData , 'left' ,'right','Importers',1500 ,3600);
	slide('slider5' , slideData , 'left2' ,'right2','Exporters',2000 ,3600);

});

function slide( id , slideData ,btn1 ,btn2,parentId ,time ,time2){
	var $ul = $('<ul></ul>');

	var $slider4 = $('#' + id);

	$slider4.html('');

	for(i = 0; i < slideData.length; i++) {

		// 一个li 为一个单位

		if(i % 4 == 0) {

			var $slideLi = $('<li></li>');

		}

		var $slideDiv = $('<div class="molli-text"  title="' + slideData[i].text + '" ><strong id="text" >' + slideData[i].text + '</strong></div>');
		var $slideImg = $('<div class="wrapImg"><img src="' + slideData[i].url + '" alt="" /><span class="equalImg">&nbsp;</span></div>');
		var $slideA = $('<a class="molli-grids" href="newCompany.html"></a>');

		$slideA.append($slideImg, $slideDiv);

		$slideLi.append($slideA);
		$ul.append($slideLi);
	}

	$slider4.html($ul.html());

	//上下居中	
	var allStrong = $('#'+id+' .molli-text').find('strong')	
	$.each(allStrong, function(i,elem) {
		var h = $(elem).get(0).offsetHeight ;
		if( h >= 80){
			$(elem).height(80);
		}else{
			var top = (80-h)/2
			$(elem).css({"margin-top":top});
		}
	});


	$aFrist = $slider4.find('a').eq(0);
	$aLi = $slider4.find('li').eq(0)

	var oneWidth = $aFrist.width();

	$li1 = $('#'+id+' .molli .molli-grids'); 
	$left1 = $("#"+btn1);
	$right1 = $("#"+btn2);
	var now = 0;
	var slideWidth = 250 + 12;
	var timer = null;

	if(!document.addEventListener) {
		slideWidth = 250 + 12;
	}

	var len = $slider4.find('a').length;
	$slider4.css("width", len * (oneWidth + 13));
	$slider4.find('li').css({
		"width": slideWidth * 4 ,
		"overflow": "hidden"
	});

	$left1.onOff = true;
	$right1.onOff = true;

	$left1.click(function() {
		clearInterval(timer);

		if($left1.onOff) {

			$left1.onOff = !$left1.onOff;

			if(now < 1) {
				return;
			}

			now--;
			$slider4.animate({
				left: '+=' + slideWidth
			}, 1500, function() {
				$left1.onOff = !$left1.onOff;
			});

		}

	});

	$right1.click(function() {

		if($right1.onOff) {
			$right1.onOff = !$right1.onOff;
			if(now >= len - 4) {
				return;
			}

			now++;

			$slider4.animate({
				left: '-=' + slideWidth
			}, 1500, function() {
				$right1.onOff = !$right1.onOff;
			});
		}

	});

	var shift = true ;
	
	function autoPlay() {

		len = $slider4.find('a').length;
		$slider4.css("width", len * slideWidth);
	
		if(now >= len - 4) {

			if(shift){
				$slider4.append($slider4.html() + $slider4.html() + $slider4.html()  );
			}
			
			shift = false; 

			len = $slider4.find('a').length;
			$slider4.css("width", len * slideWidth);
			$('.lastLi').css({
				"width": slideWidth * ($lastLiWidth),
				"overflow": "hidden"
			});
			now++;
			$slider4.animate({
				left: '-=' + slideWidth
			}, time);

		} else {
			now++;
			$slider4.animate({
				left: '-=' + slideWidth
			}, time);
		}

	}

	if(len > 4) {

		var $lastLi = $slider4.find('li:last').addClass('lastLi') //找最后一个动态给他大小。
		var $lastLiWidth = $lastLi.find('a').length

		$('.lastLi').css({
			"width": (slideWidth) * $lastLiWidth,
			"overflow": "hidden"
		});

		timer = setInterval(function() {
			autoPlay();
		}, time2);

		$('#'+parentId).hover(function() {
			clearInterval(timer);
		}, function() {

			timer = setInterval(function() {
			autoPlay();
			}, time2);
		})
	}
	
}
/***********************  动态 生成 公告  扩展 jquery  *************/
(function($) {
	$.fn.extend({
		Scroll: function(opt, callback) {
			//参数初始化
			if(!opt) var opt = {};
			var _btnUp = $("#" + opt.up); //Shawphy:向上按钮
			var _btnDown = $("#" + opt.down); //Shawphy:向下按钮
			var timerID;
			var _this = this.eq(0).find("ul:first");
			var lineH = _this.find("li:first").height(), //获取行高
				line = opt.line ? parseInt(opt.line, 10) : parseInt(this.height() / lineH, 10), //每次滚动的行数，默认为一屏，即父容器高度
				speed = opt.speed ? parseInt(opt.speed, 10) : 500; //卷动速度，数值越大，速度越慢（毫秒）
			timer = opt.timer //?parseInt(opt.timer,10):3000; //滚动的时间间隔（毫秒）
			if(line == 0) line = 1;
			var upHeight = 0 - line * lineH;
			//滚动函数
			var scrollUp = function() {
				_btnUp.unbind("click", scrollUp); //Shawphy:取消向上按钮的函数绑定
				_this.animate({
					marginTop: upHeight
				}, speed, function() {
					for(i = 1; i <= line; i++) {
						_this.find("li:first").appendTo(_this);
					}
					_this.css({
						marginTop: 0
					});
					_btnUp.bind("click", scrollUp); //Shawphy:绑定向上按钮的点击事件
				});

			}
			//Shawphy:向下翻页函数
			var scrollDown = function() {
				_btnDown.unbind("click", scrollDown);
				for(i = 1; i <= line; i++) {
					_this.find("li:last").show().prependTo(_this);
				}
				_this.css({
					marginTop: upHeight
				});
				_this.animate({
					marginTop: 0
				}, speed, function() {
					_btnDown.bind("click", scrollDown);
				});
			}
			//Shawphy:自动播放
			var autoPlay = function() {
				if(timer) timerID = window.setInterval(scrollUp, timer);
			};
			var autoStop = function() {
				if(timer) window.clearInterval(timerID);
			};
			//鼠标事件绑定
			_this.hover(autoStop, autoPlay).mouseout();
			_btnUp.css("cursor", "pointer").click(scrollUp).hover(autoStop, autoPlay); //Shawphy:向上向下鼠标事件绑定
			_btnDown.css("cursor", "pointer").click(scrollDown).hover(autoStop, autoPlay);

		}
	})
})(jQuery);