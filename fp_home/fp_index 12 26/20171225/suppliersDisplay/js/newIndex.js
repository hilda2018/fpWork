var slideData = [{
		"url": "./images/person.png",
		"text": "11Golden importers1 Golden importers1 Golden importers1n importers1 Golden importers1 Golden importers1n importers1 Golden importers1 Golden importers1n importers1 Golden importers1 Golden importers1"
	},
	{
		"url": "./images/gd2.jpg",
		"text": "22Golden importers1 Golden importers1 Golden importers2"
	},
	{
		"url": "./images/person.png",
		"text": "33Golden importers1 Golden importers1 Golden importers1"
	},
	{
		"url": "./images/gd2.jpg",
		"text": "44Golden importers1 Golden importers1 Golden importers2"
	},
	{
		"url": "./images/person.png",
		"text": "55Golden importers1 Golden importers1 Golden importers1"
	},
	{
		"url": "./images/gd2.jpg",
		"text": "66Golden importers1 Golden importers1 Golden importers2"
	}
];

// 需求的数据

var s3Data = [{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	},
	{
		"title": "Coming soon......",
		"time": "2 weeks ago from ABC"
	}
];

//公告的数据
var s1Data = [{
		"url": "",
		"title": "China has implemented AEO agreement with New Zealand",
		"content":"<p>The AEO Agreement has been implemented between China and New Zealand since this July. The agreement will benefit those two countries from simplified customs procedure for their exporting processing. It is expected that the customs clearance time and cost will be halved with this agreement.<p><p>China has signed AEO with those countries or regions including Singapore, South Korea, EU, Switzerland, New Zealand and Hong Kong. There are around 4000 Chinese companies being under AEO status.</p>",
		"time":"By Freshport, 1st Sept 2017",
		"special":"false"
	},
	{
		"url": "",
		"title": "Port Jam alert in Shanghai",
		"content":"<p>Shanghai Guandong port is suffering vessels congestion, its working time table is under chaos. These schedules of shipment will be delayed. A few shipping lines has announced adjustment and delay of their shipment.</p>",
		"time":"By Freshport, 30 Aug 2017",
		"special":"false"
	},
	{
		"url": "",
		"title": "Banana may become the 6th Mexican fruit to enter the Chinese market",
		"content":"<p>Mexican Bananas would probably be able to enter the Chinese market. The Mexican National Health and Food Safety Service has visited Beijing for the purpose of speed up the finalization the agreement about the Mexican Banana imported to China .</p><p>Currently, there are 5 varieties of Mexican fruits allowed to import china, which are avocado, raspberry, blueberry, black berry and grape. In Asia, China is the second biggest and important bussiness partner of Mexico, with the annual import value of approximate US$ 300million.</p>",
		"time":"By Freshport, 28 Aug 2017",
		"special":"false"
	},
	{
		"url": "",
		"title": "AFL grand opening on the 6th of September , 2017",
		"content":"<p>There are over 700 worldwide fruit industry exhibitors will participate the Asia fruit Logistica (AFL)in Hong Kong.  Costa Rica , Finland ，Jordan and Uzbekistan will be on their first show on the AFL. South Africa plans to increase its exhibition venue size by 150% than that of last year. South Korea will increase their size by 70% and Germany, Japan, Taiwan and Chile willincrease their size by 50%.</p><p>There will be more new products and service in this years’ show. The Tokita seeds company will release their new super-sweet pumpkin variety. The polish berries producer will unveil its jumbo blueberries. And Yumsun , a Chinese company will demonstrate its new prepack and carton design.</p>",
		"time":"By Freshport  27 Aug 2017",
		"special":"false"
	},
	{
		"url": "",
		"title": "Huge opportunity in the chinese imported fruit industry",
		"content":"<p>There are 40 countries and regions allowed to export their fruits to China.  Over hundreds variety of imported fruit are sold in China ,including durian , pineapple, orange, kiwi, apple, banana etc. The total imported fruit value has been over USD 5 billion in 2016.</p><p>It is expected that by 2021, the imported fruit market will keep increasing with the rise of China’s economy and its civilians income. Experts predict the annual growth rate of Chinese imported fruit volume will be around 5% in the next 4 years. There is still a big opportunity for oversea fruit trader to enter in the Chinese market.</p>",
		"time":"By Freshport  25 Aug 2017",
		"special":"false"
	},
	{
		"url": "./fruitList.html",
		"title": "A new list of China allowable import fruits has been released from AQSIQ (Updated 23 Aug 2017)",
		"content":"",
		"time":"By Freshport  24 Aug 2017",
		"special":"true"
	},//复制一份
	{
		"url": "",
		"title": "China has implemented AEO agreement with New Zealand",
		"content":"<p>The AEO Agreement has been implemented between China and New Zealand since this July. The agreement will benefit those two countries from simplified customs procedure for their exporting processing. It is expected that the customs clearance time and cost will be halved with this agreement.<p><p>China has signed AEO with those countries or regions including Singapore, South Korea, EU, Switzerland, New Zealand and Hong Kong. There are around 4000 Chinese companies being under AEO status.</p>",
		"time":"By Freshport, 1st Sept 2017",
		"special":"false"
	},
	{
		"url": "",
		"title": "Port Jam alert in Shanghai",
		"content":"<p>Shanghai Guandong port is suffering vessels congestion, its working time table is under chaos. These schedules of shipment will be delayed. A few shipping lines has announced adjustment and delay of their shipment.</p>",
		"time":"By Freshport, 30 Aug 2017",
		"special":"false"
	},
	{
		"url": "",
		"title": "Banana may become the 6th Mexican fruit to enter the Chinese market",
		"content":"<p>Mexican Bananas would probably be able to enter the Chinese market. The Mexican National Health and Food Safety Service has visited Beijing for the purpose of speed up the finalization the agreement about the Mexican Banana imported to China .</p><p>Currently, there are 5 varieties of Mexican fruits allowed to import china, which are avocado, raspberry, blueberry, black berry and grape. In Asia, China is the second biggest and important bussiness partner of Mexico, with the annual import value of approximate US$ 300million.</p>",
		"time":"By Freshport, 28 Aug 2017",
		"special":"false"
	},
	{
		"url": "",
		"title": "AFL grand opening on the 6th of September , 2017",
		"content":"<p>There are over 700 worldwide fruit industry exhibitors will participate the Asia fruit Logistica (AFL)in Hong Kong.  Costa Rica , Finland ，Jordan and Uzbekistan will be on their first show on the AFL. South Africa plans to increase its exhibition venue size by 150% than that of last year. South Korea will increase their size by 70% and Germany, Japan, Taiwan and Chile willincrease their size by 50%.</p><p>There will be more new products and service in this years’ show. The Tokita seeds company will release their new super-sweet pumpkin variety. The polish berries producer will unveil its jumbo blueberries. And Yumsun , a Chinese company will demonstrate its new prepack and carton design.</p>",
		"time":"By Freshport  27 Aug 2017",
		"special":"false"
	},
	{
		"url": "",
		"title": "Huge opportunity in the chinese imported fruit industry",
		"content":"<p>There are 40 countries and regions allowed to export their fruits to China.  Over hundreds variety of imported fruit are sold in China ,including durian , pineapple, orange, kiwi, apple, banana etc. The total imported fruit value has been over USD 5 billion in 2016.</p><p>It is expected that by 2021, the imported fruit market will keep increasing with the rise of China’s economy and its civilians income. Experts predict the annual growth rate of Chinese imported fruit volume will be around 5% in the next 4 years. There is still a big opportunity for oversea fruit trader to enter in the Chinese market.</p>",
		"time":"By Freshport  25 Aug 2017",
		"special":"false"
	},
	{
		"url": "./fruitList.html",
		"title": "A new list of China allowable import fruits has been released from AQSIQ (Updated 23 Aug 2017)",
		"content":"",
		"time":"By Freshport  24 Aug 2017",
		"special":"true"
	}
];

var s2Data = [{
		"url": "",
		"title": "The domestic importers display function has been open to public formally, all the importers who are freshport members are able to log in their accounts and compose their company profile in the operation center section.   <span>28th Aug 2017</span>"
	},
	{
		"url": "",
		"title": "35 Chinese importers have successfully uploaded their company information on the fresh port, the exporter display section is coming soon.<span>18th Aug 2017</span>"
	},
	{
		"url": "",
		"title": "20 importers are currently using the Freshport’s innovative and exclusive secondary tax clearance service with their exporters. They said the system was useful, convenient and transparent for their business.<span>16th Aug 2017</span>"
	},
	{
		"url": "",
		"title": "The domestic importers display function has been open to public formally, all the importers who are freshport members are able to log in their accounts and compose their company profile in the operation center section.   <span>28th Aug 2017</span>"
	},
	{
		"url": "",
		"title": "35 Chinese importers have successfully uploaded their company information on the fresh port, the exporter display section is coming soon.<span>18th Aug 2017</span>"
	},
	{
		"url": "",
		"title": "20 importers are currently using the Freshport’s innovative and exclusive secondary tax clearance service with their exporters. They said the system was useful, convenient and transparent for their business.<span>16th Aug 2017</span>"
	}
	
];

$(function() {
		
	if(  !document.getElementsByClassName ){

		layer.open({
				type: 1,
				id: 'pro',
				title: 'Warnning',
				maxmin: true,
				area: ['940px', '520px'],
				content: $('#contentBrowser').html()
		});


	   	if( parseInt( $('#layui-layer1').css('left') ) < 0  ){
	         	
			var Layer_width = (document.documentElement.clientWidth ?
				document.documentElement.clientWidth : document.body.clientWidth);

			var Layer_height = (document.body.scrollHeight ?
				document.body.scrollHeight : document.documentElement.scrollHeight);

			var Layer_h2 = (document.body.clientHeight ?
				document.body.clientHeight : document.documentElement.clientHeight);

			$("#layui-layer-shade1").css({
				"width": Layer_width,
				"height": Layer_height
			});

			$('#layui-layer1').css({
				"margin-left": Layer_width / 2,
				"margin-top": Layer_h2 / 2
			});
				
		}
	}


	
	


	//轮播图
	var arrImgContent =[
	{"imgSrc":"images/banner6.jpg","arrImgLink":"jishou.html","title":"Consignment Twice Taxation"},//寄售二次征税
	{"imgSrc":"images/banner.jpg","arrImgLink":"","title":"Trading Price Display"},//价格行情
	{"imgSrc":"images/banner2.jpg","arrImgLink":"newSearch.html","title":"Search your partners"},//寻找合作伙伴 ,importer 的搜索页面
	{"imgSrc":"images/banner8.jpg","arrImgLink":"mailto:hermanglen@freshoport.com","title":"How to become Freshport member"}//会员
	];
	
	var arrImg = [];
	
	for(var i = 0 ; i < arrImgContent.length ; i++){
		
		arrImg.push(arrImgContent[i].imgSrc);	
	
	}
	

	(function() {

		if(!arrImg) {
			return;
		}

		var $box = $('#carousel');
		$box.html('');

		var $boxUl = $('<ul></ul>');
		var $boxDiv = $('<div></div>');
		
		for(var i = 0; i < arrImg.length; i++) {

			if(   arrImgContent[i].arrImgLink == ''){
				var ulLi = $('<li><a href = "javascript:;" target="_blank" alt="'+arrImgContent[i].title+'" title="'+arrImgContent[i].title+'" ><img _src="'+arrImgContent[i].imgSrc+'" alt="'+arrImgContent[i].title+'" title="'+arrImgContent[i].title+'" /></a></li>');
			}else{
				var ulLi = $('<li><a href = "'+arrImgContent[i].arrImgLink +'" target="_blank" alt="'+arrImgContent[i].title+'" title="'+arrImgContent[i].title+'" ><img _src="'+arrImgContent[i].imgSrc+'" alt="'+arrImgContent[i].title+'" title="'+arrImgContent[i].title+'"/></a></li>');
			}

			if(i == 0){
				var oSpan = $('<span class="active" ></span>');
				
				var $obj = ulLi.find('img');
				$obj.attr("src",$obj.attr("_src"));
				
			}else{
				var oSpan = $('<span></span>');		
			}
			
		
			$boxUl.append(ulLi);
			$boxDiv.append(oSpan);
		}
		$box.append($boxUl,$boxDiv);
	
		setInterval(function(){
			$.each($box.find('img'), function(i,elem) {
				var value = $(elem).attr("_src");
				 $(elem).attr("src",value);
			});
		},1000);
		
		var $olLi = $('#carousel div span');
		var $ulLi = $('#carousel ul li');
		var oneWidth = $ulLi.width();
		var iNow = 0;
		var timer = null;
		var imgLen = $olLi.length ;
		var timer2 = null ;
		
		$ulLi.slice(1).each(function(){
			$(this).css('left',oneWidth);
		});
	
		$olLi.mouseover(function(){
			clearTimeout(timer);
			timer = setTimeout($.proxy(function(){
				$(this).attr('class','active').siblings().attr('class','');
				var index = $(this).index();
				
				if( iNow < index ){
					$ulLi.eq( $(this).index() ).css('left',oneWidth);
					$ulLi.eq(iNow).animate({ left : -oneWidth },1400);
					
				}
				else if( iNow > index ){
					$ulLi.eq( $(this).index() ).css('left',-oneWidth);
					$ulLi.eq(iNow).animate({ left : oneWidth },1400);
				}
				$ulLi.eq( $(this).index() ).animate({ left : 0 },1400);
					
				iNow = index;
			},this),600);
		});
		
		function autoPlay( iNow ){
			iNow = ( iNow ) % imgLen;
			var next = iNow +1 ;
		
			next = ( next ) % imgLen;
			
			$olLi.eq(next).attr('class','active').siblings().attr('class','');
			$ulLi.eq( next ).css('left',-oneWidth);
			$ulLi.eq(iNow).animate({ left : oneWidth },1400);	
			$ulLi.eq( next ).animate({ left : 0 },1400);
		
			
		}
	
		timer2 = setInterval(function(){
		
			autoPlay( iNow );
			iNow ++ ;
	
		},4600);
		
		
		$box.hover(function(){
			
			clearInterval( timer2 );
		},function(){
			clearInterval( timer2 );
			timer2 = setInterval(function(){
		
				autoPlay( iNow );
				iNow ++ ;
		
			},4600);
		});
		
		
		
	})(arrImg);

	//s1 公告栏 动态生成 

	var $s1 = $("#s1List")
	var $temp =$('<ul></ul>');
	for(var i = 0; i < s1Data.length; i++) {
		
		if(s1Data[i].url == ''){
			var $A = $('<a href="javascript:void(0);" class="window"  content="' + s1Data[i].content + '" title="' + s1Data[i].title + '"  >' + s1Data[i].title + '</a>');
		}else{
			var $A = $('<a href="'+s1Data[i].url+'" target="_blank" title="' + s1Data[i].title + '" >' + s1Data[i].title + '</a>');
		}
		
		
		
		var $Span1 = $('<span class="date" title="' + s1Data[i].time + '">' + s1Data[i].time + '</span>');
		var $Li = $('<li></li>');

		if(s1Data[i].special == "false"){
			var $Li = $('<li></li>');
		}else{
			var $Li = $('<li class="special" ></li>');
		}

		$Li.append($A, $Span1);
		$temp.append($Li);
	}
	
	$s1.html( $temp.html() );
	$temp.html('');

	$("#s1List").delegate('.window', 'click', function() {

		var str = $(this).attr("content");
		var strTitle = $(this).attr("title");
		
		layer.open({
			type: 1,
			title: strTitle,
			maxmin: true,
			area: ['600px', '400px'],
			content: str
		});

	});

/*	$("#s1").Scroll({
		line: 4,
		speed: 1000,
		timer: 3000
	});*/

	//s2 公告栏 动态生成

	var $s2 = $("#s2List")

	for(var i = 0; i < s2Data.length; i++) {

		var $A2 = $('<a href="javascript:;" >' + s2Data[i].title + '</a>');
		var $Li2 = $('<li></li>');

		$Li2.append($A2);
		$temp.append($Li2);
	}
	$s2.html( $temp.html() );
	$temp.html('');
/*
	$("#s2").Scroll({
		line: 1,
		speed: 1500,
		timer: 5000
	});
*/
/*	$("#s2List").delegate('li', 'click', function() {

		layer.open({
			type: 2,
			title: 'welcome',
			maxmin: true,
			area: ['800px', '500px'],
			content: 'http://www.ifreshfair.com/Column/content/id/1154.html'
		});

	});*/

	//s3 需求 动态生成

	/*var $s3 = $("#s3List");
	$s3.html('');

	var $ul = $('<ul></ul>');
	for(var i = 0; i < s3Data.length; i++) {

		var $A3 = $('<a href="javascript:void(0);"  class="itme_01" >' + s3Data[i].title + '</a>');
		var $Span3 = $('<span class="date">' + s3Data[i].time + '</span>');

		var $Li3 = $('<li></li>');

		$Li3.append($A3, $Span3);
		$ul.append($Li3);
	}

	$s3.html($ul.html());

	$ul.html('');*/
/*
	$("#s3").Scroll({
		line: 4,
		speed: 1000,
		timer: 3000,
		up: "btn1",
		down: "btn2"
	});*/
	// 第一个时间 过渡时间 ； 第二个时间 是循环时间
	slide('slider4' , slideData , 'left' ,'right','Importers',1500 ,3600);
	/*slide('slider5' , slideData , 'left2' ,'right2','Exporters',2000 ,3600);*/

});

function slide( id , slideData ,btn1 ,btn2,parentId ,time ,time2){
	var $ul = $('<ul></ul>');

	var $slider4 = $('#' + id);

	$slider4.html('');

	for(i = 0; i < slideData.length; i++) {

		// 一个li 为一个单位

		if(i % 4 == 0) {

			var $slideLi = $('<li></li>');

		}

		var $slideDiv = $('<div class="molli-text"  title="' + slideData[i].text + '" ><strong id="text" >' + slideData[i].text + '</strong></div>');
		var $slideImg = $('<div class="wrapImg"><img src="' + slideData[i].url + '" alt="" /><span class="equalImg">&nbsp;</span></div>');
		var $slideA = $('<a class="molli-grids" href="newCompany.html"></a>');

		$slideA.append($slideImg, $slideDiv);

		$slideLi.append($slideA);
		$ul.append($slideLi);
	}

	$slider4.html($ul.html());

	//上下居中	
	var allStrong = $('#'+id+' .molli-text').find('strong')	
	$.each(allStrong, function(i,elem) {
		var h = $(elem).get(0).offsetHeight ;
		if( h >= 80){
			$(elem).height(80);
		}else{
			var top = (80-h)/2
			$(elem).css({"margin-top":top});
		}
	});


	$aFrist = $slider4.find('a').eq(0);
	$aLi = $slider4.find('li').eq(0)

	var oneWidth = $aFrist.width();

	$li1 = $('#'+id+' .molli .molli-grids'); 
	$left1 = $("#"+btn1);
	$right1 = $("#"+btn2);
	var now = 0;
	var slideWidth = 250 + 12;
	var timer = null;

	if(!document.addEventListener) {
		slideWidth = 250 + 12;
	}

	var len = $slider4.find('a').length;
	$slider4.css("width", len * (oneWidth + 13));
	$slider4.find('li').css({
		"width": slideWidth * 4 ,
		"overflow": "hidden"
	});



	$left1.click(function() {
	

			if(now < 1) {
				return;
			}

			now--;
			$slider4.animate({
				left: '+=' + slideWidth
			}, 1500);

	

	});

	$right1.click(function() {

	
		if(now >= len - 4) {
				return;
		}

		now++;
		

		$slider4.animate({
			left: '-=' + slideWidth
		}, 1500);
	
	});

	var shift = true ;
	
	function autoPlay() {

		len = $slider4.find('a').length;
		$slider4.css("width", len * slideWidth);

		if(now >= len - 5) {
	
			
			if(shift){
				$slider4.append($slider4.html()+$slider4.html()+$slider4.html());
			}else{	
				
				$slider4.css({left: '0px'});
		
			}
			
			shift = false; 

			len = $slider4.find('a').length;
			$slider4.css("width", len * slideWidth);
			$('.lastLi').css({
				"width": slideWidth * ($lastLiWidth),
				"overflow": "hidden"
			});
			now = (now+1) % len ;
			$slider4.animate({
				left: '-=' + slideWidth
			}, time);
			
		

		} else {
			now = (now+1) % len ;
			$slider4.animate({
				left: '-=' + slideWidth
			}, time);
		}

	}

	if(len > 4) {

		var $lastLi = $slider4.find('li:last').addClass('lastLi') //找最后一个动态给他大小。
		var $lastLiWidth = $lastLi.find('a').length

		$('.lastLi').css({
			"width": (slideWidth) * $lastLiWidth,
			"overflow": "hidden"
		});

		timer = setInterval(function() {
			autoPlay();
		}, time2);

		$('#'+parentId).hover(function() {
			clearInterval(timer);
		}, function() {

			timer = setInterval(function() {
			autoPlay();
			}, time2);
		})
	}
	
}


	
/***********************  动态 生成 公告  扩展 jquery  *************/
(function($) {
	$.fn.extend({
		Scroll: function(opt, callback) {
			//参数初始化
			if(!opt) var opt = {};
			var _btnUp = $("#" + opt.up); //Shawphy:向上按钮
			var _btnDown = $("#" + opt.down); //Shawphy:向下按钮
			var timerID;
			var _this = this.eq(0).find("ul:first");
			var lineH = _this.find("li:first").height(), //获取行高
				line = opt.line ? parseInt(opt.line, 10) : parseInt(this.height() / lineH, 10), //每次滚动的行数，默认为一屏，即父容器高度
				speed = opt.speed ? parseInt(opt.speed, 10) : 500; //卷动速度，数值越大，速度越慢（毫秒）
			timer = opt.timer //?parseInt(opt.timer,10):3000; //滚动的时间间隔（毫秒）
			if(line == 0) line = 1;
			var upHeight = 0 - line * lineH;
			//滚动函数
			var scrollUp = function() {
				_btnUp.unbind("click", scrollUp); //Shawphy:取消向上按钮的函数绑定
				_this.animate({
					marginTop: upHeight
				}, speed, function() {
					for(i = 1; i <= line; i++) {
						_this.find("li:first").appendTo(_this);
					}
					_this.css({
						marginTop: 0
					});
					_btnUp.bind("click", scrollUp); //Shawphy:绑定向上按钮的点击事件
				});

			}
			//Shawphy:向下翻页函数
			var scrollDown = function() {
				_btnDown.unbind("click", scrollDown);
				for(i = 1; i <= line; i++) {
					_this.find("li:last").show().prependTo(_this);
				}
				_this.css({
					marginTop: upHeight
				});
				_this.animate({
					marginTop: 0
				}, speed, function() {
					_btnDown.bind("click", scrollDown);
				});
			}
			//Shawphy:自动播放
			var autoPlay = function() {
				if(timer) timerID = window.setInterval(scrollUp, timer);
			};
			var autoStop = function() {
				if(timer) window.clearInterval(timerID);
			};
			//鼠标事件绑定
			_this.hover(autoStop, autoPlay).mouseout();
			_btnUp.css("cursor", "pointer").click(scrollUp).hover(autoStop, autoPlay); //Shawphy:向上向下鼠标事件绑定
			_btnDown.css("cursor", "pointer").click(scrollDown).hover(autoStop, autoPlay);

		}
	})
})(jQuery);